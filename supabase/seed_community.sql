-- ============================================================
-- MAMASTALE — 커뮤니티 시드 데이터 통합 스크립트
-- 용도: Supabase SQL Editor에 복사-붙여넣기
-- 안전: 여러 번 실행해도 중복 생성 없음 (ON CONFLICT DO NOTHING)
-- 날짜: 2026-03-02
-- ============================================================

-- ────────────────────────────────────────────────────
-- 0. 스키마 보장 (이미 존재하면 무시)
-- ────────────────────────────────────────────────────
ALTER TABLE public.stories ADD COLUMN IF NOT EXISTS is_public BOOLEAN DEFAULT false;
ALTER TABLE public.stories ADD COLUMN IF NOT EXISTS author_alias TEXT;
ALTER TABLE public.stories ADD COLUMN IF NOT EXISTS view_count INTEGER DEFAULT 0;
ALTER TABLE public.stories ADD COLUMN IF NOT EXISTS like_count INTEGER DEFAULT 0;
ALTER TABLE public.stories ADD COLUMN IF NOT EXISTS comment_count INTEGER DEFAULT 0;
ALTER TABLE public.stories ADD COLUMN IF NOT EXISTS topic TEXT;

CREATE INDEX IF NOT EXISTS idx_stories_public ON public.stories(is_public, created_at DESC) WHERE is_public = true;
CREATE INDEX IF NOT EXISTS idx_stories_popular ON public.stories(like_count DESC) WHERE is_public = true;
CREATE INDEX IF NOT EXISTS idx_stories_topic ON public.stories(topic) WHERE is_public = true;


-- ────────────────────────────────────────────────────
-- 1. 시스템 사용자 생성 (시드 동화의 작성자)
-- ────────────────────────────────────────────────────
INSERT INTO auth.users (
  id, instance_id, aud, role,
  email, encrypted_password,
  email_confirmed_at, created_at, updated_at,
  raw_app_meta_data, raw_user_meta_data,
  is_super_admin, confirmation_token
) VALUES (
  '00000000-0000-0000-0000-000000000001',
  '00000000-0000-0000-0000-000000000000',
  'authenticated', 'authenticated',
  'system@mamastale.com', '',
  now(), now(), now(),
  '{"provider":"email","providers":["email"]}',
  '{"name":"mamastale"}',
  false, ''
) ON CONFLICT (id) DO NOTHING;

INSERT INTO public.profiles (id, display_name, locale, free_stories_remaining)
VALUES ('00000000-0000-0000-0000-000000000001', 'mamastale', 'ko', 0)
ON CONFLICT (id) DO NOTHING;


-- ────────────────────────────────────────────────────
-- 2. 샘플 동화 8편 (고정 UUID — 중복 방지)
-- ────────────────────────────────────────────────────

-- ▸ 동화 1: 산후우울 — "비 오는 날의 무지개"
INSERT INTO public.stories (
  id, user_id, title, scenes, status,
  is_public, author_alias, topic, view_count, like_count, comment_count,
  created_at, updated_at
) VALUES (
  'a0000000-0000-0000-0000-000000000001',
  '00000000-0000-0000-0000-000000000001',
  '비 오는 날의 무지개',
  '[
    {"sceneNumber":1,"title":"회색빛 아침","text":"어느 작은 마을에 하늘이라는 엄마 토끼가 살았어요. 하늘이는 예쁜 아기 토끼를 낳았지만, 이상하게도 매일 아침 눈을 뜨면 마음이 무거웠어요. 창밖에는 끊임없이 비가 내렸고, 하늘이의 마음에도 회색 구름이 가득했답니다."},
    {"sceneNumber":2,"title":"혼자만의 눈물","text":"아기 토끼가 방긋 웃어도 하늘이는 웃음이 나오지 않았어요. \"왜 나만 이럴까, 다른 엄마들은 다 행복해 보이는데...\" 하늘이는 아무도 모르게 베개에 얼굴을 묻고 조용히 울었어요. 그 눈물은 밤마다 베개를 적셨답니다."},
    {"sceneNumber":3,"title":"무너지는 하루","text":"어느 날 아기 토끼가 밤새 울자, 하늘이는 더 이상 견딜 수 없었어요. \"나는 나쁜 엄마야. 아기에게 미안해.\" 하늘이는 방 한구석에 웅크려 앉아 한참을 울었어요. 빗소리만이 하늘이의 울음을 감싸주었답니다."},
    {"sceneNumber":4,"title":"작은 노크 소리","text":"그때 누군가 문을 두드렸어요. 이웃에 사는 할머니 거북이 느린 할머니였어요. \"하늘아, 오늘 차 한 잔 마시지 않을래?\" 할머니의 따뜻한 목소리에 하늘이는 망설이다 문을 열었어요. 할머니는 아무 말 없이 하늘이를 꼭 안아주었답니다."},
    {"sceneNumber":5,"title":"할머니의 비밀","text":"할머니는 따뜻한 캐모마일 차를 건네며 말했어요. \"나도 아기를 낳고 매일 울었단다. 그때는 내가 세상에서 가장 나쁜 엄마인 줄 알았지.\" 하늘이는 깜짝 놀라며 할머니를 바라보았어요. \"할머니도요?\" 할머니는 부드럽게 고개를 끄덕였답니다."},
    {"sceneNumber":6,"title":"비 속의 산책","text":"할머니는 하늘이의 손을 잡고 비 오는 길을 함께 걸었어요. \"비가 올 때만 볼 수 있는 것이 있단다.\" 하늘이는 고개를 갸웃했어요. 빗방울이 나뭇잎 위에서 반짝이고, 물웅덩이에 하늘이 비치는 모습이 생각보다 아름다웠어요."},
    {"sceneNumber":7,"title":"작은 무지개","text":"산책을 마치고 돌아오는 길, 구름 사이로 작은 무지개가 나타났어요. \"봐, 하늘아. 비가 와야만 무지개가 뜨는 거란다.\" 하늘이의 눈에 오랜만에 반짝임이 돌아왔어요. 아기 토끼도 무지개를 보며 까르르 웃었답니다."},
    {"sceneNumber":8,"title":"용기 내어 말하기","text":"그날 밤, 하늘이는 남편 토끼에게 처음으로 솔직하게 말했어요. \"나 요즘 너무 힘들어. 아기가 예쁜데도 자꾸 울고 싶어져.\" 남편 토끼는 하늘이를 안으며 말했어요. \"말해줘서 고마워. 우리 함께 해결하자.\" 하늘이의 마음에 따뜻한 온기가 번졌어요."},
    {"sceneNumber":9,"title":"천천히 맑아지는 하늘","text":"하늘이는 매주 할머니와 차를 마시며 이야기를 나누었어요. 남편 토끼도 밤중 수유를 함께 했고요. 어느 날 문득 아기 토끼의 웃음소리에 하늘이도 함께 웃고 있는 자신을 발견했어요. 비구름이 조금씩, 아주 조금씩 걷히고 있었답니다."},
    {"sceneNumber":10,"title":"비 온 뒤의 무지개처럼","text":"\"아가야, 엄마가 힘들었지만 네가 있어서 다시 웃을 수 있었어.\" 하늘이는 아기 토끼에게 속삭였어요. 비가 온 뒤에 피는 무지개처럼, 힘든 시간을 지나온 하늘이의 미소는 그 어느 때보다 찬란했답니다. 그리고 그 미소는 아기 토끼에게 세상에서 가장 따뜻한 선물이 되었어요."}
  ]'::jsonb,
  'completed',
  true, '준우맘', '산후우울', 87, 34, 3,
  now() - interval '12 days', now() - interval '12 days'
) ON CONFLICT (id) DO NOTHING;


-- ▸ 동화 2: 양육번아웃 — "지친 별의 쉼터"
INSERT INTO public.stories (
  id, user_id, title, scenes, status,
  is_public, author_alias, topic, view_count, like_count, comment_count,
  created_at, updated_at
) VALUES (
  'a0000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000001',
  '지친 별의 쉼터',
  '[
    {"sceneNumber":1,"title":"빛을 잃은 별","text":"하늘 높은 곳에 반짝이는 별 하나가 살았어요. 별님은 두 개의 작은 별을 돌보느라 매일매일 바빴답니다. 아침에는 큰 별을 씻기고, 낮에는 작은 별을 달래고, 밤에는 두 별 모두 재워야 했어요. 그러다 보니 별님의 빛이 점점 희미해지기 시작했어요."},
    {"sceneNumber":2,"title":"끝없는 하루","text":"\"엄마 나 이거 해줘!\" \"엄마 안아줘!\" 두 작은 별은 쉴 틈 없이 별님을 불렀어요. 별님은 하루가 끝나면 텅 빈 기분이 들었어요. 거울 속 자신을 바라보니 예전의 반짝이던 모습은 온데간데없고, 지친 얼굴만 보였답니다."},
    {"sceneNumber":3,"title":"폭풍 같은 밤","text":"어느 밤, 큰 별이 울고 작은 별도 따라 울자 별님은 소리를 질렀어요. \"제발 좀 조용히 해!\" 순간 세상이 고요해졌고, 두 작은 별의 놀란 눈동자가 보였어요. 별님은 그 자리에 주저앉아 \"미안해, 미안해\"를 반복했답니다."},
    {"sceneNumber":4,"title":"달님의 방문","text":"그때 창문으로 부드러운 달빛이 들어왔어요. 달님이 조용히 말했어요. \"별님아, 나한테 잠깐 아이들을 맡기지 않을래? 너는 좀 쉬어도 돼.\" 별님은 \"괜찮아, 내가 해야 해\"라고 말하면서도 눈물이 흘렀어요."},
    {"sceneNumber":5,"title":"쉼터의 발견","text":"달님의 권유로 별님은 처음으로 혼자만의 시간을 가졌어요. 은하수 옆 조용한 구름 위에 앉으니 오랜만에 바람소리가 들렸어요. \"이런 소리가 있었구나.\" 별님은 한참 동안 아무것도 하지 않고 가만히 앉아 있었어요. 그것만으로도 마음이 조금 가벼워졌답니다."},
    {"sceneNumber":6,"title":"오래된 빛을 찾아서","text":"구름 위에서 별님은 어린 시절을 떠올렸어요. 노래하기를 좋아했고, 별빛으로 그림 그리기를 즐겼던 때가 있었죠. \"나는 엄마이기 전에 나였구나.\" 별님은 오랜만에 작은 노래를 흥얼거렸어요. 잊고 있던 자신만의 빛이 조금씩 되살아났답니다."},
    {"sceneNumber":7,"title":"함께하는 연습","text":"별님은 아빠 별에게 솔직하게 말했어요. \"나 혼자 다 하려고 했는데, 더 이상은 못하겠어.\" 아빠 별은 미안한 얼굴로 대답했어요. \"몰라서 미안해. 같이 하자.\" 그날부터 아빠 별이 아침 씻기기를 맡았고, 별님은 그 시간에 차를 마실 수 있었어요."},
    {"sceneNumber":8,"title":"아이들에게 배우다","text":"마음에 여유가 생기자 신기한 일이 일어났어요. 큰 별이 작은 별에게 그림을 가르쳐주는 모습이 보이고, 작은 별이 까르르 웃는 소리가 예전보다 크게 들렸어요. \"내가 여유로우니까 아이들이 더 잘 보이는 거구나.\" 별님은 그제야 깨달았답니다."},
    {"sceneNumber":9,"title":"불완전한 반짝임","text":"여전히 힘든 날도 있었어요. 하지만 별님은 이제 알았어요. 완벽하지 않아도 된다는 것을. 지친 날에는 쉬어도 되고, 울어도 되고, 도움을 요청해도 된다는 것을. 그런 날에도 두 작은 별은 별님을 꼭 안아주며 \"엄마 사랑해\"라고 말해주었답니다."},
    {"sceneNumber":10,"title":"세상에서 가장 따뜻한 별","text":"\"아가들아, 엄마가 지쳐서 빛을 잃을 뻔했지만 너희 덕분에 다시 반짝일 수 있었어.\" 별님은 두 작은 별을 품에 안았어요. 세상에서 가장 밝은 별은 아니지만, 세상에서 가장 따뜻한 별. 그것이 바로 별님이었답니다. 그 따뜻함은 두 작은 별에게 평생 잊지 못할 빛이 되었어요."}
  ]'::jsonb,
  'completed',
  true, '서연이네', '양육번아웃', 63, 28, 2,
  now() - interval '10 days', now() - interval '10 days'
) ON CONFLICT (id) DO NOTHING;


-- ▸ 동화 3: 시댁갈등 — "두 개의 정원"
INSERT INTO public.stories (
  id, user_id, title, scenes, status,
  is_public, author_alias, topic, view_count, like_count, comment_count,
  created_at, updated_at
) VALUES (
  'a0000000-0000-0000-0000-000000000003',
  '00000000-0000-0000-0000-000000000001',
  '두 개의 정원',
  '[
    {"sceneNumber":1,"title":"꽃을 사랑한 토끼","text":"숲속 마을에 달이라는 토끼가 살았어요. 달이는 꽃을 무척 좋아해서 작은 정원을 가꾸며 행복하게 지냈답니다. 장미도 심고, 라벤더도 심고, 해바라기도 심었어요. 달이의 정원은 마을에서 가장 예뻤답니다."},
    {"sceneNumber":2,"title":"새로운 이웃","text":"달이가 결혼하고 새 마을로 이사를 갔어요. 바로 옆집에는 시어머니 토끼가 살았는데, 시어머니도 큰 정원을 가꾸고 있었어요. \"우리 정원에는 국화만 심는 거란다.\" 시어머니의 정원에는 오직 국화만 가득했어요. 달이는 조금 당황했답니다."},
    {"sceneNumber":3,"title":"부딪히는 물뿌리개","text":"달이가 정원에 장미를 심자 시어머니가 고개를 저었어요. \"장미는 이 땅에 안 맞아. 국화가 더 좋단다.\" 달이는 속상했지만 참았어요. 하지만 라벤더를 심었을 때도, 해바라기를 심었을 때도 같은 말이 돌아왔어요. 달이의 마음에 가시가 하나씩 돋아났답니다."},
    {"sceneNumber":4,"title":"시든 꽃","text":"결국 달이는 자기 정원을 가꾸는 것을 그만두었어요. 시어머니 눈치를 보느라 좋아하는 꽃도 심지 못하고, 매일 국화만 돌보았답니다. 달이의 정원은 텅 비었고, 달이의 마음도 함께 시들어갔어요. 밤마다 베개를 적시며 울었답니다."},
    {"sceneNumber":5,"title":"오래된 나무의 조언","text":"정원 한가운데 서 있는 오래된 참나무가 달이에게 말을 걸었어요. \"달아, 왜 네 꽃을 포기했니?\" \"시어머니가 싫어하시니까요.\" 참나무는 부드럽게 말했어요. \"서로 다른 꽃이 함께 피어야 정원이 더 아름다운 법이란다.\""},
    {"sceneNumber":6,"title":"용기 낸 한마디","text":"달이는 오랜 고민 끝에 시어머니에게 조심스럽게 말했어요. \"어머니, 저도 제가 좋아하는 꽃을 심어보고 싶어요. 국화 옆에 장미를 심으면 더 예쁠 것 같아요.\" 시어머니는 처음엔 놀란 표정이었지만, 달이의 진지한 눈을 보고 잠시 생각에 잠겼답니다."},
    {"sceneNumber":7,"title":"작은 변화","text":"시어머니는 \"한번 해보렴\"이라고 말했어요. 달이는 국화 사이에 작은 장미 한 그루를 심었어요. 며칠 뒤 장미가 피자, 시어머니가 가만히 바라보았어요. \"생각보다 예쁘구나.\" 그 짧은 한마디에 달이의 마음에 봄이 찾아온 것 같았답니다."},
    {"sceneNumber":8,"title":"함께 가꾸는 정원","text":"그날부터 달이와 시어머니는 함께 정원을 가꾸기 시작했어요. 시어머니는 국화 돌보는 법을 알려주고, 달이는 장미 가꾸는 법을 알려드렸어요. 서로의 꽃을 이해하는 데 시간이 걸렸지만, 함께 흙을 만지며 조금씩 마음이 가까워졌답니다."},
    {"sceneNumber":9,"title":"비 오는 날의 우산","text":"어느 비 오는 날, 시어머니가 달이에게 우산을 건네며 말했어요. \"달아, 처음에 네가 속상했을 텐데 말해줘서 고마워. 나는 내 방식만 옳다고 생각했거든.\" 달이는 울컥하며 시어머니의 손을 잡았어요. 두 사람의 마음에 무지개가 피어올랐답니다."},
    {"sceneNumber":10,"title":"두 정원이 하나로","text":"이제 그 정원에는 국화와 장미, 라벤더와 해바라기가 함께 피어요. 서로 다른 꽃들이 어우러진 정원은 마을에서 가장 아름다운 곳이 되었답니다. 달이는 아기 토끼에게 속삭였어요. \"서로 다른 것은 틀린 게 아니라 새로운 아름다움이란다.\" 그 말은 아기 토끼의 마음속에 씨앗처럼 심어졌어요."}
  ]'::jsonb,
  'completed',
  true, '하준맘', '시댁갈등', 52, 19, 1,
  now() - interval '8 days', now() - interval '8 days'
) ON CONFLICT (id) DO NOTHING;


-- ▸ 동화 4: 경력단절 — "날개를 접은 나비"
INSERT INTO public.stories (
  id, user_id, title, scenes, status,
  is_public, author_alias, topic, view_count, like_count, comment_count,
  created_at, updated_at
) VALUES (
  'a0000000-0000-0000-0000-000000000004',
  '00000000-0000-0000-0000-000000000001',
  '날개를 접은 나비',
  '[
    {"sceneNumber":1,"title":"날개 펴던 시절","text":"꽃밭 마을에 봄이라는 나비가 살았어요. 봄이는 누구보다 높이, 누구보다 멀리 날 수 있는 멋진 나비였답니다. 아침마다 새로운 꽃밭을 발견하고, 저녁이면 하늘 높이 올라가 별과 인사했어요. 날개를 펴고 나는 것이 봄이의 전부였답니다."},
    {"sceneNumber":2,"title":"날개를 접다","text":"아기 애벌레가 태어난 날, 봄이는 날개를 접었어요. \"아기가 클 때까지만 잠깐이야.\" 하지만 그 잠깐은 일 년이 되고, 이 년이 되었어요. 다른 나비들이 하늘을 나는 모습을 볼 때마다 봄이의 가슴이 아렸답니다."},
    {"sceneNumber":3,"title":"잊혀진 날개","text":"\"엄마는 뭘 잘해?\" 아기 애벌레의 순수한 질문에 봄이는 말문이 막혔어요. 예전에는 \"날기!\"라고 바로 대답했을 텐데, 이제는 그 자신감이 사라졌어요. 거울에 비친 날개는 오랫동안 펴지 않아 힘없이 처져 있었답니다."},
    {"sceneNumber":4,"title":"우연한 바람","text":"어느 날 세찬 바람이 불었어요. 봄이는 아기를 감싸 안았는데, 그 바람에 날개가 저절로 펼쳐졌어요. 오랜만에 느끼는 바람의 감촉에 봄이의 심장이 두근거렸어요. \"아, 나는 나비였지.\" 잊고 있던 감각이 온몸으로 퍼져나갔답니다."},
    {"sceneNumber":5,"title":"작은 비행 연습","text":"봄이는 아기가 낮잠 자는 틈을 타 살짝 날개를 펴보았어요. 처음에는 비틀거렸지만, 조금씩 감을 되찾았어요. 낮은 꽃 위를 살짝 날아보는 것만으로도 가슴이 벅차올랐답니다. \"아직 날 수 있어!\" 봄이의 눈에 오랜만에 빛이 돌아왔어요."},
    {"sceneNumber":6,"title":"엄마이자 나비","text":"봄이는 깨달았어요. 날개를 접는다고 나비가 아닌 것이 아니라는 것을. 엄마로서의 시간도, 나비로서의 시간도 모두 소중하다는 것을. 봄이는 아기 애벌레를 등에 태우고 낮은 곳을 함께 날기 시작했어요. 아기는 까르르 웃었답니다."},
    {"sceneNumber":7,"title":"다시 날기 위한 준비","text":"봄이는 매일 조금씩 날개를 단련했어요. 아기를 돌보면서도 짬짬이 날갯짓 연습을 했답니다. 쉽지 않았지만 포기하지 않았어요. \"천천히 가도 괜찮아. 중요한 건 다시 시작하는 거야.\" 봄이는 스스로에게 말했어요."},
    {"sceneNumber":8,"title":"새로운 꽃밭","text":"어느 봄날, 봄이는 새로운 꽃밭을 발견했어요. 예전에 날던 곳과는 달랐지만, 그곳만의 아름다움이 있었어요. 엄마가 되기 전에는 보이지 않던 작은 꽃들, 이슬방울의 반짝임이 눈에 들어왔어요. 경험이 봄이에게 새로운 눈을 선물한 거였답니다."},
    {"sceneNumber":9,"title":"애벌레의 날개","text":"시간이 흘러 아기 애벌레에게도 작은 날개가 돋아났어요. \"엄마, 나도 날 수 있어?\" \"물론이지, 네가 원하는 만큼 높이 날 수 있어.\" 봄이는 아기에게 날개 펴는 법을 가르쳐주었어요. 봄이의 경험은 아기에게 가장 좋은 선생님이었답니다."},
    {"sceneNumber":10,"title":"더 높이, 더 따뜻하게","text":"이제 봄이는 예전보다 더 높이 나는 건 아니지만, 예전보다 더 따뜻하게 날아요. 아기 나비와 함께 꽃밭 위를 날며 봄이는 속삭였어요. \"엄마가 날개를 접었던 시간이 있었기에, 지금 너와 함께 나는 이 순간이 더 소중한 거란다.\" 그 말은 바람을 타고 온 꽃밭에 퍼져나갔답니다."}
  ]'::jsonb,
  'completed',
  true, '지우맘', '경력단절', 41, 16, 1,
  now() - interval '6 days', now() - interval '6 days'
) ON CONFLICT (id) DO NOTHING;


-- ▸ 동화 5: 자존감 — "거울 속 진짜 나"
INSERT INTO public.stories (
  id, user_id, title, scenes, status,
  is_public, author_alias, topic, view_count, like_count, comment_count,
  created_at, updated_at
) VALUES (
  'a0000000-0000-0000-0000-000000000005',
  '00000000-0000-0000-0000-000000000001',
  '거울 속 진짜 나',
  '[
    {"sceneNumber":1,"title":"흐릿한 거울","text":"작은 호수 마을에 구름이라는 고양이가 살았어요. 구름이는 매일 아침 호수에 비친 자신을 바라보았는데, 이상하게 자기 모습이 또렷하게 보이지 않았어요. \"다른 고양이들은 다 예쁘고 멋진데, 나는 왜 이렇게 흐릿할까.\" 구름이는 늘 자신이 부족하다고 느꼈답니다."},
    {"sceneNumber":2,"title":"비교의 늪","text":"마을의 다른 엄마 고양이들은 모두 잘하는 것이 있었어요. 하얀 고양이는 요리를 잘하고, 노란 고양이는 노래를 잘하고, 검은 고양이는 운동을 잘했어요. 구름이는 아기 고양이를 안고 생각했어요. \"나는 뭘 잘하는 걸까. 엄마 자격이 있는 걸까.\""},
    {"sceneNumber":3,"title":"깨진 자신감","text":"어느 날 동네 모임에서 다른 엄마가 물었어요. \"구름이 씨는 아기에게 뭘 가르치고 있어요?\" 아무 대답도 못한 구름이는 그날 밤 이불 속에서 한참을 울었어요. \"나 같은 엄마 밑에서 아기가 불쌍해.\" 구름이의 마음은 깊은 웅덩이에 빠진 것 같았답니다."},
    {"sceneNumber":4,"title":"아기의 눈","text":"그런데 아기 고양이는 구름이를 다른 눈으로 보고 있었어요. 구름이가 안아주면 세상에서 가장 편한 표정을 짓고, 구름이가 노래하면 방긋방긋 웃었어요. 아기에게 구름이는 세상에서 가장 따뜻하고, 가장 좋은 냄새가 나는 존재였답니다."},
    {"sceneNumber":5,"title":"호수의 속삭임","text":"어느 조용한 밤, 호수가 구름이에게 말을 걸었어요. \"구름아, 너는 왜 남들과 비교하니? 호수에 비친 네 모습을 자세히 봐.\" 구름이가 호수를 들여다보니, 흐릿하던 모습 대신 부드럽고 따뜻한 눈을 가진 고양이가 보였어요. 호수가 구름이의 진짜 모습을 비춰준 거였답니다."},
    {"sceneNumber":6,"title":"나만의 빛","text":"\"너는 다른 고양이처럼 될 필요가 없어. 너만의 빛이 있으니까.\" 호수의 말에 구름이는 생각에 잠겼어요. 요리는 서툴지만 아기를 안아줄 때의 온기, 노래는 못하지만 이야기를 들려줄 때의 목소리. 그것들이 바로 구름이만의 빛이었어요."},
    {"sceneNumber":7,"title":"서툴러도 괜찮아","text":"구름이는 서툴지만 용기를 내어 아기에게 이야기를 들려주기 시작했어요. 완벽하지 않은 이야기였지만, 아기 고양이는 눈을 반짝이며 들었어요. \"더, 더!\" 아기의 반응에 구름이의 마음에 작은 꽃이 피어났답니다. 서툴러도 괜찮다는 것을 처음 느꼈어요."},
    {"sceneNumber":8,"title":"거울이 맑아지다","text":"구름이가 자신을 있는 그대로 받아들이기 시작하자, 신기한 일이 일어났어요. 호수에 비친 모습이 점점 또렷해지고, 그 모습이 생각보다 괜찮아 보였어요. 완벽하지 않지만 따뜻한 눈, 서툴지만 진심 어린 미소. 그것이 구름이의 진짜 모습이었답니다."},
    {"sceneNumber":9,"title":"엄마라는 이름","text":"\"엄마가 되면 완벽해야 하는 줄 알았어. 하지만 완벽하지 않아도 사랑할 수 있고, 서툴러도 충분히 좋은 엄마일 수 있다는 걸 알았어.\" 구름이는 아기 고양이를 꼭 안으며 말했어요. 아기는 구름이의 품에서 세상 가장 평화로운 얼굴로 잠들었답니다."},
    {"sceneNumber":10,"title":"세상에서 가장 예쁜 거울","text":"이제 구름이는 호수를 볼 때마다 미소를 지어요. 흐릿하던 거울은 사라지고, 따뜻하고 용감한 엄마 고양이가 또렷하게 비치거든요. \"아가야, 너도 커서 거울을 볼 때 네 모습이 흐릿하게 느껴지는 날이 올 수도 있어. 그때 기억해. 넌 있는 그대로 충분히 아름답다는 걸.\" 그 말은 아기 고양이의 마음속에 영원히 빛나는 거울이 되었답니다."}
  ]'::jsonb,
  'completed',
  true, '시우맘', '자존감', 35, 11, 2,
  now() - interval '5 days', now() - interval '5 days'
) ON CONFLICT (id) DO NOTHING;


-- ▸ 동화 6: 양육번아웃 — "완벽한 나비의 비밀 정원"
INSERT INTO public.stories (
  id, user_id, title, scenes, status,
  is_public, author_alias, topic, view_count, like_count, comment_count,
  created_at, updated_at
) VALUES (
  'a0000000-0000-0000-0000-000000000006',
  '00000000-0000-0000-0000-000000000001',
  '완벽한 나비의 비밀 정원',
  '[
    {"sceneNumber":1,"title":"숲에서 가장 아름다운 정원","text":"깊은 숲속에 아름다운 나비 한 마리가 살았어요. 나비는 숲에서 가장 크고 멋진 정원을 가꾸고 있었답니다. 장미도 백 송이, 튤립도 백 송이, 어떤 꽃이든 나비의 정원에서는 완벽하게 피어났어요."},
    {"sceneNumber":2,"title":"아무도 모르는 밤","text":"모든 동물들이 나비의 정원을 부러워했어요. 하지만 밤이 되면 나비는 꽃잎 위에 혼자 앉아 가쁜 숨을 쉬었답니다. 날개가 무겁고 온몸이 아팠지만, 아무에게도 말하지 못했어요. \"완벽한 정원의 주인이 지쳐 보이면 안 되니까.\""},
    {"sceneNumber":3,"title":"날 수 없는 아침","text":"어느 날 아침, 나비는 날개를 펴려 했지만 몸이 움직이지 않았어요. 이슬에 젖은 날개가 납처럼 무거웠답니다. 정원의 꽃들은 물을 기다리고 있었지만 나비는 꽃잎 하나 만질 힘도 없었어요."},
    {"sceneNumber":4,"title":"아기 애벌레의 눈물","text":"\"엄마, 왜 안 날아?\" 아기 애벌레가 눈을 동그랗게 뜨고 물었어요. 나비는 웃어 보이려 했지만 입꼬리가 올라가지 않았답니다. 아기 애벌레의 걱정스러운 눈을 보자 나비의 마음이 무너져 내렸어요. \"엄마가 다 해줘야 하는데, 미안해.\""},
    {"sceneNumber":5,"title":"무당벌레 할머니의 지혜","text":"그때 무당벌레 할머니가 정원을 지나다 나비를 발견했어요. \"얘야, 정원의 모든 꽃이 같은 날 필 필요는 없단다.\" 나비는 깜짝 놀라 할머니를 바라보았어요. \"어떤 꽃은 봄에, 어떤 꽃은 여름에 피어도 정원은 여전히 아름답지 않니?\""},
    {"sceneNumber":6,"title":"내려놓은 물뿌리개","text":"나비는 용기를 내어 정원 한쪽의 꽃들을 쉬게 해주었어요. 물을 주지 않아도 들꽃은 스스로 자랐고, 나비는 작은 화분 하나에만 집중했답니다. 그 작은 화분 앞에 앉아 있으니 오랜만에 바람 소리가 들렸어요."},
    {"sceneNumber":7,"title":"함께 피운 한 송이","text":"아기 애벌레가 조심조심 기어와 작은 화분에 물을 주었어요. \"엄마, 나도 도와줄게!\" 둘이 함께 돌본 그 꽃은 정원의 어떤 꽃보다 환하게 피어났답니다. 나비는 아기의 작은 손을 바라보며 눈물이 핑 돌았어요."},
    {"sceneNumber":8,"title":"완벽하지 않은 아름다움","text":"나비는 정원을 둘러보며 깨달았어요. 가장 아름다운 정원은 완벽하게 가꾼 곳이 아니라, 야생화와 정원 꽃이 함께 어우러진 곳이라는 것을요. 바람에 흔들리는 들꽃도, 삐뚤게 자란 줄기도 모두 정원의 일부였답니다."},
    {"sceneNumber":9,"title":"짧지만 기쁜 날갯짓","text":"이제 나비는 예전처럼 멀리 날지 않아요. 대신 아기 애벌레 곁에서 짧게, 하지만 기쁘게 날갯짓을 한답니다. 지칠 때는 쉬어도 된다는 걸 알았거든요. 나비의 날개는 예전보다 가볍고 부드러워졌어요."},
    {"sceneNumber":10,"title":"엄마의 비밀 정원","text":"나비는 아기 애벌레에게 속삭였어요. \"엄마가 완벽하지 않아도, 네 곁에 있는 것만으로 충분해.\" 그날부터 정원에는 완벽하지 않지만 따뜻한 향기가 가득 피어올랐답니다. 그 향기는 숲에서 가장 행복한 냄새였어요."}
  ]'::jsonb,
  'completed',
  true, '별빛 엄마', '양육번아웃', 58, 32, 2,
  now() - interval '4 days', now() - interval '4 days'
) ON CONFLICT (id) DO NOTHING;


-- ▸ 동화 7: 자존감 — "마음을 읽는 부엉이"
INSERT INTO public.stories (
  id, user_id, title, scenes, status,
  is_public, author_alias, topic, view_count, like_count, comment_count,
  created_at, updated_at
) VALUES (
  'a0000000-0000-0000-0000-000000000007',
  '00000000-0000-0000-0000-000000000001',
  '마음을 읽는 부엉이',
  '[
    {"sceneNumber":1,"title":"숲의 마음 선생님","text":"깊은 숲속 가장 높은 참나무 위에 부엉이 한 마리가 살았어요. 부엉이는 숲에서 가장 지혜로운 동물이었답니다. 슬픈 다람쥐도, 화난 여우도, 부엉이에게 오면 마음이 편안해졌어요."},
    {"sceneNumber":2,"title":"텅 빈 둥지","text":"하지만 밤이 되어 모두가 돌아가면, 부엉이는 혼자 둥지에 앉아 한숨을 쉬었어요. 다른 동물의 마음은 잘 읽으면서, 자기 마음은 왜 이렇게 알 수 없는지 모르겠답니다. \"나는 정말 좋은 엄마일까?\" 별을 바라보며 매일 밤 같은 질문을 되풀이했어요."},
    {"sceneNumber":3,"title":"아기 부엉이의 한마디","text":"어느 저녁, 아기 부엉이가 엄마의 얼굴을 가만히 들여다보았어요. \"엄마는 왜 항상 슬퍼 보여?\" 부엉이는 가슴이 덜컥 내려앉았답니다. 남들 앞에서는 완벽하게 숨겼다고 생각했는데, 세상에서 가장 작은 눈이 엄마의 진짜 마음을 보고 있었어요."},
    {"sceneNumber":4,"title":"머리와 가슴의 거리","text":"부엉이는 자기 마음을 분석해보려 했어요. 늘 하던 것처럼 이유를 찾고 답을 구했지요. 하지만 머리로 이해한 마음과 가슴으로 느끼는 마음은 너무나 달랐답니다. 아는 것과 느끼는 것 사이에 깊은 골짜기가 있었어요."},
    {"sceneNumber":5,"title":"도토리 하나의 선물","text":"아기 부엉이가 뒤뚱뒤뚱 다가와 작은 도토리 하나를 내밀었어요. \"엄마, 이거 먹으면 기분 좋아져!\" 울퉁불퉁 작은 도토리였지만, 아기의 진심이 담겨 있었답니다. 부엉이는 도토리를 받아들고 코끝이 찡해졌어요."},
    {"sceneNumber":6,"title":"머리가 아닌 가슴으로","text":"그 순간 부엉이는 깨달았어요. 마음에 대해 아는 것과, 마음을 직접 느끼는 것은 전혀 다른 일이라는 것을요. 머리로는 백 가지 답을 알아도, 가슴이 말하는 한 가지를 듣지 못하면 소용이 없었답니다."},
    {"sceneNumber":7,"title":"엄마의 눈물","text":"부엉이는 분석하는 것을 멈추고 아기 부엉이를 꼭 안았어요. 그리고 처음으로 아기 앞에서 소리 내어 울었답니다. \"엄마도 잘 모르겠어. 엄마도 무서워.\" 아기 부엉이는 작은 날개로 엄마를 토닥토닥 두드렸어요."},
    {"sceneNumber":8,"title":"숲이 보내준 위로","text":"신기한 일이 일어났어요. 부엉이가 자신의 약한 모습을 보여주자, 숲속 동물들이 하나둘 찾아와 말했답니다. \"우리도 그랬어요.\" \"당신이 완벽하지 않아서 더 좋아요.\" 부엉이는 약해 보이면 사랑받지 못할 줄 알았는데, 오히려 더 많은 사랑이 돌아왔어요."},
    {"sceneNumber":9,"title":"충분히 좋은 엄마","text":"부엉이는 이제 알았어요. 완벽한 전문가이기 전에, 함께 울고 웃는 엄마이면 충분하다는 것을요. 모든 답을 알지 못해도 괜찮고, 때로는 아기에게 배워도 된다는 것을요. 둥지가 예전보다 따뜻하게 느껴졌답니다."},
    {"sceneNumber":10,"title":"함께 느끼는 사랑","text":"부엉이는 아기 부엉이를 품에 안고 말했어요. \"모든 걸 알지 못해도 괜찮아. 네 곁에서 함께 느끼는 것, 그게 진짜 사랑이야.\" 그 밤, 참나무 위 작은 둥지에서 엄마와 아기의 심장 소리가 하나로 어우러졌답니다. 그것은 세상에서 가장 지혜로운 노래였어요."}
  ]'::jsonb,
  'completed',
  true, '새벽빛 엄마', '자존감', 44, 25, 1,
  now() - interval '3 days', now() - interval '3 days'
) ON CONFLICT (id) DO NOTHING;


-- ▸ 동화 8: 경력단절 — "색을 잃은 화가 새"
INSERT INTO public.stories (
  id, user_id, title, scenes, status,
  is_public, author_alias, topic, view_count, like_count, comment_count,
  created_at, updated_at
) VALUES (
  'a0000000-0000-0000-0000-000000000008',
  '00000000-0000-0000-0000-000000000001',
  '색을 잃은 화가 새',
  '[
    {"sceneNumber":1,"title":"하늘의 화가","text":"높은 절벽 위에 아름다운 새 한 마리가 살았어요. 이 새는 숲에서 가장 멋진 화가였답니다. 날개에 물감을 묻혀 하늘을 가로지르면, 세상에서 가장 아름다운 노을이 펼쳐졌어요."},
    {"sceneNumber":2,"title":"물감을 내려놓은 날","text":"아기 새가 태어난 날, 화가 새는 물감 상자를 둥지 깊숙이 넣어두었어요. \"아기가 클 때까지만 잠깐이야.\" 그렇게 하루가 지나고 한 달이 지나고 계절이 바뀌었답니다. 하늘에는 더 이상 화가 새의 노을이 피지 않았어요."},
    {"sceneNumber":3,"title":"회색빛 세상","text":"시간이 흐르자 화가 새는 색을 잊기 시작했어요. 주황빛과 보랏빛을 어떻게 섞었는지, 노을의 끝자락은 무슨 색이었는지 기억이 나지 않았답니다. 세상 모든 것이 회색으로 보였어요. 마음속도 잿빛 구름으로 가득 찼답니다."},
    {"sceneNumber":4,"title":"가슴속 빈자리","text":"어느 날 화가 새는 다른 새들이 하늘에 그림을 그리는 모습을 보았어요. 가슴 한가운데가 텅 빈 것처럼 아려왔답니다. \"나도 저렇게 날았었는데.\" 눈물이 날개 위로 뚝뚝 떨어졌어요. 그 눈물은 투명해서 아무 색도 없었답니다."},
    {"sceneNumber":5,"title":"오래된 물감 상자","text":"\"엄마, 이거 뭐야?\" 아기 새가 둥지 구석에서 오래된 물감 상자를 찾아냈어요. 먼지가 수북이 쌓여 있었지만, 뚜껑을 열자 아직 마르지 않은 물감들이 반짝이고 있었답니다. 화가 새의 심장이 작게 두근거리기 시작했어요."},
    {"sceneNumber":6,"title":"서투른 첫 붓질","text":"아기 새가 날개에 파란 물감을 묻혀 둥지 바닥에 삐뚤빼뚤 칠했어요. 엉망이었지만 아기 새는 까르르 웃었답니다. 화가 새도 조심스럽게 날개를 뻗어 노란 물감을 찍었어요. 두 날개가 만든 색은 서툴렀지만 기쁨으로 반짝였어요."},
    {"sceneNumber":7,"title":"엄마만의 색","text":"화가 새는 깜짝 놀랐어요. 아기와 함께 칠한 색에서 전에는 본 적 없는 빛이 났거든요. 혼자 그리던 노을과는 다른, 더 부드럽고 더 깊은 색이었답니다. 그것은 엄마가 된 뒤에야 볼 수 있는, 사랑의 색이었어요."},
    {"sceneNumber":8,"title":"달라진 붓질","text":"화가 새는 다시 그림을 그리기 시작했어요. 예전의 화려한 노을은 아니었지만, 새로운 그림에는 따뜻함이 담겨 있었답니다. 기술 대신 마음으로 그린 색은 보는 이의 가슴을 포근하게 감싸주었어요."},
    {"sceneNumber":9,"title":"작지만 나의 시간","text":"아기 새가 잠든 저녁, 화가 새는 조용히 하늘 한 켠에 작은 그림을 그렸어요. 거창하지 않아도 괜찮았어요. 이 작은 시간이 온전히 자신의 것이라는 게 소중했답니다. 밤하늘에 피어난 작은 노을은 별들도 감탄할 만큼 아름다웠어요."},
    {"sceneNumber":10,"title":"다시 칠하는 색","text":"화가 새는 아기 새에게 속삭였어요. \"꿈을 잠시 내려놓은 것이지, 잃어버린 게 아니야. 너와 함께 다시 칠하는 이 색은 더 아름답단다.\" 다음 날 아침, 숲 위로 오랜만에 노을이 번졌어요. 예전과는 다르지만 세상에서 가장 따뜻한 노을이었답니다."}
  ]'::jsonb,
  'completed',
  true, '무지개 엄마', '경력단절', 39, 21, 1,
  now() - interval '2 days', now() - interval '2 days'
) ON CONFLICT (id) DO NOTHING;


-- ────────────────────────────────────────────────────
-- 3. 샘플 댓글 (커뮤니티 활성화 분위기)
-- ────────────────────────────────────────────────────

-- 댓글도 시스템 사용자로 작성 (실제 유저처럼 보이도록 다양한 별명 사용)
INSERT INTO public.comments (id, user_id, story_id, content, author_alias, created_at)
VALUES
  -- 동화1 댓글 (산후우울)
  ('c0000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000001',
   '읽으면서 울었어요. 나만 그런 게 아니었구나... 하늘이 이야기가 제 이야기 같아요.',
   '하은맘', now() - interval '11 days'),

  ('c0000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000001',
   '아기한테 읽어줬는데 저도 모르게 목이 메었어요. 좋은 동화 감사합니다.',
   '도윤이맘', now() - interval '10 days'),

  ('c0000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000001',
   '할머니 거북이 캐릭터가 너무 따뜻해요. 저도 이런 이웃이 있으면 좋겠다.',
   '소율엄마', now() - interval '9 days'),

  -- 동화2 댓글 (양육번아웃)
  ('c0000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000002',
   '\"세상에서 가장 따뜻한 별\" 이 문장에서 눈물이 왈칵... 저도 그런 별이 되고 싶어요.',
   '지민이네', now() - interval '9 days'),

  ('c0000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000002',
   '둘째 키우면서 매일 이렇게 느끼는데, 동화로 읽으니 위로가 돼요.',
   '예준맘', now() - interval '8 days'),

  -- 동화3 댓글 (시댁갈등)
  ('c0000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000003',
   '두 정원이 하나로 되는 결말이 정말 아름다워요. 현실에서도 이랬으면...',
   '서준이네', now() - interval '7 days'),

  -- 동화5 댓글 (자존감)
  ('c0000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000005',
   '구름이 고양이가 저 같아서 마음이 아팠는데, 끝에 가서 괜찮아졌어요. 나도 있는 그대로 괜찮다고 믿어볼게요.',
   '하율맘', now() - interval '4 days'),

  ('c0000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000005',
   '매일 비교하느라 지쳤는데 이 동화 덕분에 조금 놓아줄 수 있을 것 같아요.',
   '은우맘', now() - interval '3 days'),

  -- 동화6 댓글 (완벽한 나비)
  ('c0000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000006',
   '아기 애벌레가 \"엄마, 나도 도와줄게!\" 하는 장면에서 우리 아이 생각나서 울었어요.',
   '민서네', now() - interval '3 days'),

  ('c0000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000006',
   '완벽하지 않아도 된다는 메시지가 진짜 필요했어요. 고맙습니다.',
   '시아맘', now() - interval '2 days'),

  -- 동화7 댓글 (마음을 읽는 부엉이)
  ('c0000000-0000-0000-0000-000000000011', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000007',
   '아동심리 전공인데 이 동화 정말 잘 만들어졌어요. 엄마들에게 꼭 필요한 이야기.',
   '하람맘', now() - interval '2 days'),

  -- 동화8 댓글 (색을 잃은 화가 새)
  ('c0000000-0000-0000-0000-000000000012', '00000000-0000-0000-0000-000000000001',
   'a0000000-0000-0000-0000-000000000008',
   '디자이너 출신인데 이 동화가 제 이야기예요. 다시 그림 그려볼 용기가 생겼어요.',
   '유하맘', now() - interval '1 day')
ON CONFLICT (id) DO NOTHING;


-- ────────────────────────────────────────────────────
-- 4. 기존 데이터 보정 (이전 마이그레이션으로 생성된 topic 없는 동화)
-- ────────────────────────────────────────────────────
UPDATE public.stories SET topic = '산후우울'  WHERE title = '비 오는 날의 무지개' AND topic IS NULL;
UPDATE public.stories SET topic = '양육번아웃' WHERE title = '지친 별의 쉼터'     AND topic IS NULL;
UPDATE public.stories SET topic = '시댁갈등'  WHERE title = '두 개의 정원'       AND topic IS NULL;
UPDATE public.stories SET topic = '경력단절'  WHERE title = '날개를 접은 나비'    AND topic IS NULL;
UPDATE public.stories SET topic = '자존감'   WHERE title = '거울 속 진짜 나'    AND topic IS NULL;

-- 기존 별명도 현실적으로 업데이트
UPDATE public.stories SET author_alias = '준우맘'   WHERE author_alias = '하늘빛 엄마';
UPDATE public.stories SET author_alias = '서연이네'  WHERE author_alias = '민들레 엄마';
UPDATE public.stories SET author_alias = '하준맘'   WHERE author_alias = '달빛 엄마';
UPDATE public.stories SET author_alias = '지우맘'   WHERE author_alias = '봄날 엄마';
UPDATE public.stories SET author_alias = '시우맘'   WHERE author_alias = '구름빛 엄마';


-- ────────────────────────────────────────────────────
-- 완료!
-- 총 8편의 동화 + 12개의 댓글이 커뮤니티에 표시됩니다.
-- 주제: 산후우울(1), 양육번아웃(2), 시댁갈등(1), 경력단절(2), 자존감(2)
-- ────────────────────────────────────────────────────
